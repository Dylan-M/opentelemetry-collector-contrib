extensions:
  opamp:
    instance_uid: "{{.InstanceUid}}"
    server:
      ws:
        endpoint: "ws://127.0.0.1:{{.SupervisorPort}}/v1/opamp"
        tls:
          insecure: true
    ppid: {{.PID}}
    ppid_poll_interval: {{.PPIDPollInterval}}
    capabilities:
      reports_available_components: {{.ReportsAvailableComponents}}

service:
  extensions: [opamp]

  telemetry:
    # Disable agents own telemetry to avoid port binding collisions for port 8888. Bindplane
    # will enable metrics and configure the port when a configuration is pushed to the agent.
    metrics:
      level: none
